<!-- Page Header -->
<div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
  <div>
    <h1 class="text-2xl font-bold text-slate-900">
      <i class="fas fa-calendar-alt text-blue-500 mr-2"></i>Agenda
    </h1>
    <p class="text-slate-500 mt-1">Visualize e gerencie os agendamentos</p>
  </div>
  <button 
    hx-get="/partials/agenda/form"
    hx-target="#modal-container"
    class="btn-primary flex items-center gap-2">
    <i class="fas fa-plus"></i> Novo Agendamento
  </button>
</div>

<!-- Date Navigation -->
<div class="bg-white rounded-xl shadow-md border border-slate-100 p-4 mb-6">
  <div class="flex items-center justify-between">
    <button 
      hx-get="/partials/agenda?date=<%= prevDate %>"
      hx-target="#main-content"
      class="p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition">
      <i class="fas fa-chevron-left"></i>
    </button>
    <div class="text-center">
      <h2 class="text-xl font-bold text-slate-900">
        <%= new Date(selectedDate || Date.now()).toLocaleDateString('pt-BR', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' }) %>
      </h2>
    </div>
    <button 
      hx-get="/partials/agenda?date=<%= nextDate %>"
      hx-target="#main-content"
      class="p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition">
      <i class="fas fa-chevron-right"></i>
    </button>
  </div>
</div>

<!-- Appointments List -->
<div class="bg-white rounded-xl shadow-md border border-slate-100 overflow-hidden">
  <div class="px-6 py-4 border-b border-slate-200 bg-slate-50">
    <h3 class="text-lg font-semibold text-slate-900">
      <i class="fas fa-clock mr-2 text-blue-500"></i>Agendamentos do Dia
    </h3>
  </div>
  
  <div class="divide-y divide-slate-100">
    <% if (appointments && appointments.length > 0) { %>
      <% appointments.forEach(apt => { %>
        <div class="p-4 hover:bg-slate-50 transition flex items-center justify-between" id="apt-row-<%= apt.id %>">
          <div class="flex items-center gap-4">
            <div class="w-16 text-center">
              <p class="text-2xl font-bold text-slate-900"><%= apt.time %></p>
            </div>
            <div class="w-px h-12 bg-slate-200"></div>
            <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold">
              <%= apt.clientName?.charAt(0) || '?' %>
            </div>
            <div>
              <p class="font-medium text-slate-900"><%= apt.clientName %></p>
              <p class="text-sm text-slate-500"><%= apt.serviceName %> â€¢ <%= apt.professionalName %></p>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <% if (apt.status === 'confirmed' || apt.status === 'CONFIRMED') { %>
              <span class="badge-success">Confirmado</span>
            <% } else if (apt.status === 'pending' || apt.status === 'PENDING') { %>
              <span class="badge-warning">Pendente</span>
            <% } else if (apt.status === 'cancelled' || apt.status === 'CANCELLED') { %>
              <span class="badge-danger">Cancelado</span>
            <% } else { %>
              <span class="badge-success"><%= apt.status || 'Confirmado' %></span>
            <% } %>
            <div class="flex items-center gap-1">
              <button 
                hx-get="/partials/agenda/form?id=<%= apt.id %>"
                hx-target="#modal-container"
                class="p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition"
                title="Editar">
                <i class="fas fa-edit"></i>
              </button>
              <button 
                hx-delete="/api/appointments/<%= apt.id %>"
                hx-confirm="Tem certeza que deseja cancelar este agendamento?"
                hx-target="#apt-row-<%= apt.id %>"
                hx-swap="outerHTML"
                class="p-2 text-red-500 hover:bg-red-50 rounded-lg transition"
                title="Cancelar">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <div class="p-12 text-center text-slate-500">
        <div class="w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-calendar-times text-4xl text-slate-400"></i>
        </div>
        <p class="text-lg font-medium text-slate-900">Nenhum agendamento para este dia</p>
        <p class="text-slate-500 mt-1">Clique em "Novo Agendamento" para adicionar</p>
      </div>
    <% } %>
  </div>
</div>

<!-- Modal Container -->
<div id="modal-container"></div>
